"use strict";(self.webpackChunkqr_scanner=self.webpackChunkqr_scanner||[]).push([[198],{4198:(P,h,o)=>{o.r(h),o.d(h,{GENERATOR_ROUTES:()=>O,GeneratorComponent:()=>M});var p=o(6895),c=o(4006),m=o(4859),f=o(3336),C=o(4144),T=o(455),v=o(266),y=o(945),b=o(1208),E=o(4004),R=o(9751);class x{static openSvgInNewTab(r){const n=this.buildSvgBlob(r),t=URL.createObjectURL(n);open(t).onload=()=>URL.revokeObjectURL(t)}static saveSvgAsPng(r,n){const t=this.buildSvgBlob(r);return this.buildCanvasWithBlob(t).pipe((0,E.U)(a=>{const l=a.toDataURL("image/png");return this.openUrl(l,n+".png")}))}static buildSvgBlob(r){const n=r.cloneNode(!0),t=(new XMLSerializer).serializeToString(n);return new Blob([t],{type:"image/svg+xml"})}static buildCanvasWithBlob(r,n=600,t=600){return new R.y(a=>{const l=URL.createObjectURL(r),g=new Image;g.src=l,g.onload=()=>{const s=document.createElement("canvas");s.setAttribute("width",n.toString()),s.setAttribute("height",t.toString()),s.getContext("2d",{willReadFrequently:!1}).drawImage(g,0,0,n,t,0,0,s.width,s.height),URL.revokeObjectURL(g.src),a.next(s),a.complete()},g.onerror=s=>a.error(s)})}static openUrl(r,n){const t=document.createElement("a");t.href=r,t.download=n,t.click(),URL.revokeObjectURL(r)}}var u=o(347),e=o(4650),d=o(9549);const A=["qrcodeContainer"];function U(i,r){1&i&&(e.TgZ(0,"mat-icon",15),e._uU(1,"qr_code"),e.qZA())}function Z(i,r){1&i&&(e.TgZ(0,"mat-icon",15),e._uU(1,"qr_code"),e.qZA())}let M=(()=>{class i{constructor(){this.dataLabel="\u0414\u0430\u043d\u043d\u044b\u0435",this.dataPlaceholder="google.com",this.data="",this.secretPhrase="",this.cipherText="",this.encryptionEnabled=!1,this.dataMaxlength=u.g.qrDataMaxLength,this.secretKeyMaxlength=u.g.secretKeyMaxLength,this.cipherTextMaxlength=u.g.cipherTextMaxLength}get dataToGenerateQR(){return this.data?this.data:this.dataPlaceholder}ngOnInit(){this.generateCode(this.dataToGenerateQR)}onDataChange(n){this.data!==n&&(this.data=n,this.encryptionEnabled?this.generateCipherWithCode():this.generateCode(this.dataToGenerateQR))}onSecretPhraseChange(n){this.secretPhrase!==n&&(this.secretPhrase=n,this.generateCipherWithCode())}onEncryptionToggle(){this.encryptionEnabled=!this.encryptionEnabled,this.encryptionEnabled?this.generateCipherWithCode():this.generateCode(this.dataToGenerateQR)}onSaveQr(){const n=this.qrcodeContainerRef.nativeElement.querySelector("svg");x.saveSvgAsPng(n,"QR-"+(this.encryptionEnabled?this.cipherText:this.dataToGenerateQR)).subscribe({error:l=>console.error(l)})}onOpenQrInNewTab(){const n=this.qrcodeContainerRef.nativeElement.querySelector("svg");x.openSvgInNewTab(n)}generateCipherWithCode(){this.generateCipherText(),this.generateCode(this.cipherText)}generateCipherText(){const n=b.p.encrypt(this.dataToGenerateQR,this.secretPhrase);this.cipherText=b.p.decrypt(n,this.secretPhrase)!==this.dataToGenerateQR?"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u0442\u044c":n}generateCode(n){this.qrcodeContainerRef.nativeElement.innerHTML=y.u.generateCode(n)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["qr-generator"]],viewQuery:function(n,t){if(1&n&&e.Gf(A,7),2&n){let a;e.iGM(a=e.CRH())&&(t.qrcodeContainerRef=a.first)}},standalone:!0,features:[e.jDz],decls:38,vars:18,consts:[[1,"header"],["mat-icon-button","","matTooltip","\u0421\u043a\u0430\u0447\u0430\u0442\u044c QR-\u043a\u043e\u0434 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 PNG",1,"align-center",3,"click"],["mat-icon-button","","matTooltip","\u041e\u0442\u043a\u0440\u044b\u0442\u044c QR-\u043a\u043e\u0434 \u0432 \u043d\u043e\u0432\u043e\u0439 \u0432\u043a\u043b\u0430\u0434\u043a\u0435",1,"align-center",3,"click"],[1,"qrcode-container"],["qrcodeContainer",""],[1,"fields"],[1,"field-container"],["appearance","outline","floatLabel","always",1,"field"],["matInput","","rows","3",3,"placeholder","maxlength","ngModel","ngModelChange"],["matSuffix","",4,"ngIf"],["align","end"],["color","accent",1,"enable-encryption","field",3,"ngModel","toggleChange"],["appearance","outline",1,"field"],["matInput","","rows","3",3,"maxlength","disabled","ngModel","ngModelChange"],["matInput","","rows","3","disabled","",3,"maxlength","ngModel"],["matSuffix",""]],template:function(n,t){1&n&&(e.TgZ(0,"section",0)(1,"button",1),e.NdJ("click",function(){return t.onSaveQr()}),e.TgZ(2,"mat-icon"),e._uU(3,"save_alt"),e.qZA()(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.onOpenQrInNewTab()}),e.TgZ(5,"mat-icon"),e._uU(6,"open_in_new"),e.qZA()()(),e._UZ(7,"div",3,4),e.TgZ(9,"section",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13),e.qZA(),e.TgZ(14,"textarea",8),e.NdJ("ngModelChange",function(l){return t.onDataChange(l)}),e.qZA(),e.YNc(15,U,2,0,"mat-icon",9),e.TgZ(16,"mat-hint",10),e._uU(17),e.qZA()()(),e.TgZ(18,"div",6)(19,"mat-slide-toggle",11),e.NdJ("toggleChange",function(){return t.onEncryptionToggle()}),e._uU(20," \u0428\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 "),e.qZA()(),e.TgZ(21,"div",6)(22,"mat-form-field",12)(23,"mat-label"),e._uU(24,"\u0421\u0435\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0444\u0440\u0430\u0437\u0430"),e.qZA(),e.TgZ(25,"textarea",13),e.NdJ("ngModelChange",function(l){return t.onSecretPhraseChange(l)}),e._uU(26,"            "),e.qZA(),e.TgZ(27,"mat-hint",10),e._uU(28),e.qZA()()(),e.TgZ(29,"div",6)(30,"mat-form-field",12)(31,"mat-label"),e._uU(32,"\u0428\u0438\u0444\u0440"),e.qZA(),e.TgZ(33,"textarea",14),e._uU(34,"            "),e.qZA(),e.YNc(35,Z,2,0,"mat-icon",9),e.TgZ(36,"mat-hint",10),e._uU(37),e.qZA()()()()),2&n&&(e.xp6(13),e.Oqu(t.dataLabel),e.xp6(1),e.Q6J("placeholder",t.dataPlaceholder)("maxlength",t.dataMaxlength)("ngModel",t.data),e.xp6(1),e.Q6J("ngIf",!t.encryptionEnabled),e.xp6(2),e.AsE("",t.data.length,"/",t.dataMaxlength,""),e.xp6(2),e.Q6J("ngModel",t.encryptionEnabled),e.xp6(6),e.Q6J("maxlength",t.secretKeyMaxlength)("disabled",!t.encryptionEnabled)("ngModel",t.secretPhrase),e.xp6(3),e.AsE("",t.secretPhrase.length,"/",t.secretKeyMaxlength,""),e.xp6(5),e.Q6J("maxlength",t.cipherTextMaxlength)("ngModel",t.cipherText),e.xp6(2),e.Q6J("ngIf",t.encryptionEnabled),e.xp6(2),e.AsE("",t.cipherText.length,"/",t.cipherTextMaxlength,""))},dependencies:[p.ez,p.O5,c.u5,c.Fj,c.JJ,c.nD,c.On,m.ot,m.lW,f.Ps,f.Hw,C.c,d.KE,d.bx,d.hX,d.R9,C.Nt,T.rP,T.Rr,v.AV,v.gM],styles:["[_nghost-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;align-self:center}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end}.fields[_ngcontent-%COMP%]   .field-container[_ngcontent-%COMP%]{display:flex}.fields[_ngcontent-%COMP%]   .field-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{flex-grow:1}.fields[_ngcontent-%COMP%]   .field-container[_ngcontent-%COMP%]   .enable-encryption[_ngcontent-%COMP%]{margin-bottom:5px}.qrcode-container[_ngcontent-%COMP%]{width:280px;height:280px}"]}),i})();const O=[{path:"",component:M}]}}]);